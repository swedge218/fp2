<html>
	<head>
		<title><?php echo $this->escape($this->title);?></title>
		<link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700" rel="stylesheet" type="text/css">

	<?php
	require_once('views/helpers/Location.php');
    require_once('views/helpers/ScriptContainer.php');
    print ScriptContainer::$instance->renderCSSHead();
	print ScriptContainer::$instance->renderJSHead();      ?>
    
		<script type="text/javascript" charset="utf-8">
			$(document).ready(function() {
				$( ".calendarbox" ).datepicker({
					changeMonth: true,
					changeYear: true
				});
				/* Add a click handler to the rows - this could be used as a callback */
				$(".tablegrid tbody").click(function(event) {
					$(oTable.fnSettings().aoData).each(function (){
						$(this.nTr).removeClass('row_selected');
					});
					$(event.target.parentNode).addClass('row_selected');
				});
	 
				/* Add a click handler for the delete row */
				$('#delete').click( function() {
					var anSelected = fnGetSelected( oTable );
					oTable.fnDeleteRow( anSelected[0] );
				} );
	 
				/* Init the table */
				oTable = $('.tablegrid').dataTable({
					"bJQueryUI": true,
					"bPaginate": true,
				});
				$("#peopleadd").validate();

			} );

			/* Get the rows which are currently selected */
			function fnGetSelected( oTableLocal ){
				var aReturn = new Array();
				var aTrs = oTableLocal.fnGetNodes();
				 
				for ( var i=0 ; i<aTrs.length ; i++ ){
					if ( $(aTrs[i]).hasClass('row_selected') ){
						aReturn.push( aTrs[i] );
					}
				}
				return aReturn;
			}
			
		</script>
	</head>
	<body>
		<div id="pageHolder">
			<div id="header"><?php require_once('views/scripts/preheader.phtml');?></div>
			<div id="content">
				<div id="subcontent">
					<div id="contentheader">
						<h2>Add staff members to institution <?php echo $this->escape($this->name);?></h2>
					</div>
					<div class="pad50"></div>
					<div class="mainformholder" style="height : 80px" >
						<p style="">Principal/Key Staff Members</p>
					</div>
					<div>
						<form id="members_form" method="post">
							<input type="hidden" name="updateid" id="updateid" value="<?php echo $this->id; ?>">
							<div style="width :100%;">
								<table cellpadding="0" cellspacing="0" border="0" class="display tablegrid" id="" style="width:100%">
									<thead>
										<tr>
											<th style="width : 100px;">Select</th>
											<th>Name</th>
										</tr>
									</thead>
									<tbody>
							
<?php
	foreach ($this->tutors as $staff){
?>
										<tr class="GradeA">
											<td style="width : 100px;"><input type="checkbox" name="staff[]" id="staff[]" value="<?php echo $staff['id']; ?>"<?php echo in_array($staff['id'],$this->selectedstaff) ? " checked" : ""; ?>></td>
											<td><?php echo $staff['first_name'] . " " . $staff['last_name']; ?></td>
										</tr>
<?php
	}
?>
									</tbody>
								</table>
							</div>
		
							<div class="clear pad50"></div>
							<div style="text-align : right;">
								<input type="button" value="Back" class="tsbutton green large" onclick="location='<?php echo Settings::$COUNTRY_BASE_URL ?>/institution/institutionedit/id/<?php echo $this->id ?>'" >
								<input type="submit" name="update" value="Update Staff &raquo;" class="tsbutton green large">
							</div>
						</form>
						<div class="clear pad50"></div>
	
					</div>
				</div>
			</div>
			<div id="footer"><?php require_once('views/scripts/footer.phtml');?></div>
		</div>
	</body>
	<script type="text/javascript">
		$('#members_form').submit(function() {
			$('#_wrapper').hide();
			$('#members_form select[name="_length"]')
			.append('<option value="1000">1000</option>')
			.val(1000)
			.change();
			return true;
		});
	</script>
</html>