<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
#homecontent {
	background: url("images/content-bg.png") repeat-x scroll 0 0 #FAFAFA;
	position: relative;
}

#homecontent-mid {
	background: url("images/bg-stage.png") repeat-y scroll right top #FFFFFF;
	min-height: 100%;
	outline: medium none;
	top: -40px;
}

#homebanner {
	background: url("images/bg-stage-shade.png") repeat-x scroll 0 0
		transparent;
	padding-right: 20px;
	position: relative;
}

.rounded {
	border-radius: 10px 10px 10px 10px;
}

.sliderdiv {
	background: none repeat scroll 0 0 FFFFFF;
	float: left;
}

.main-search {
	background: none repeat scroll 0 0 #FFFFFF;
	float: left;
	overflow: hidden;
}

.nav-buttons {
	background: none repeat scroll 0 0 #FFFFFF;
	float: left;
	overflow: hidden;
}


</style>
   
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />  
<link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700"
	rel="stylesheet" type="text/css">

<?php
require_once('views/helpers/ScriptContainer.php');
print ScriptContainer::$instance->renderCSSHead();
print ScriptContainer::$instance->renderJSHead();
?>


      <link rel="stylesheet" type="text/css"
	href="https://google-developers.appspot.---com/_static/f7a896e076/css/screen-docs.css" />
<link rel="stylesheet"
	href="//www.google.com/cse/style/look/default.css" type="text/css" />
<link rel="stylesheet"
	href="//fonts.googleapis.com/css?family=Open+Sans:300,400"
	type="text/css">
<script
	src="https://google-developers.appspot.com/_static/f7a896e076/js/prettify-bundle.js"></script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script id="jqueryui"
	src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"
	defer async></script>
<script
	src="//www.google.com/jsapi?key=AIzaSyCZfHRnq7tigC-COeQRmoa9Cxr0vbrK6xw"></script>
<!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<script
	src="https://google-developers.appspot.com/_static/f7a896e076/js/framebox.js"></script>

<script>
  $(function() {
    $( "#accordion" ).accordion({header: "h3", collapsible: true,active: 0})
  });
   $(".accordion").on("click", "dd", function (event) {
 $("div.active").slideToggle("slow");
 $(this).find(".content").slideToggle("slow");
 });
  </script>
</head>
<body class="yui-skin-sam">
    
	<div id="pageHolder">

		<div id="header"><?php require_once('views/scripts/header.phtml');?></div>
		<div id="content">

			<!-------   /////////////////////////// get data ////////////////////// -->

			<div>
				<?php  // require_once('views/scripts/dashboard/load_data.phtml');?>

			<!-------   /////////////////////////// make top buttons ////////////////////// -->

			<div class="rightdiv" style="float: right;">
				<?php 
                                    $singleSelection = true;
                                    require_once('views/scripts/dashboard/top_buttons.phtml');
                                ?>
			</div>

			<!-------   /////////////////////////// make left buttons ////////////////////// -->

			<div class="nav-buttons">
				<?php  
                                    $fileInfo = pathinfo(__FILE__);
                                    $fileID = $fileInfo['filename'];
                                    require_once('views/scripts/dashboard/left_buttons.phtml');
                                ?>
			</div>
			
			<!-------   /////////////////////////// load scripts ////////////////////// -->
            <div class="nav-buttons">
				<?php //require_once('views/scripts/dashboard/displayScripts.phtml');?>
			</div>

			<!-------   /////////////////////////// charts ////////////////////// -->


			<body class="docs slim framebox_body">

				<div id="allCharts" class="container">

				<div id="toprow" class="container chartrow">
						<div id="homecontent" class="container">
							<div id="homecontent-mid" class="row rounded">
                                                                <div id="homebanner" class="rounded">
                                                                    <div class="sliderdiv">
                                                                        <div id="infobutton" class="infobutton hidden">
                                                                            <span class="infowrap"><i class="fa fa-info-circle"></i></span>        
                                                                            <div id="" class="infodiv" >
                                                                                This chart shows the coverage of FP-trained health workers, the coverage of service 
                                                                                provision at facilities with FP-trained health workers, and the rate of stock outs 
                                                                                at facilities with FP-trained health workers. Together, these trend lines demonstrate 
                                                                                whether the coverage of FP services at facilities that should be providing FP is 
                                                                                improving over time and provides some clues as to the possible barriers (insufficient 
                                                                                coverage of trained health workers, high stock outs, or another service delivery challenge). 
                                                                                FP training includes Contraceptive Technology Update, FP Technology, and Injectable 
                                                                                Contraceptives for CHEWs in-service trainings.  
                                                                            </div>
                                                                    </div>
									<div id="chart_div" style="width: 600px; height: 400px;"></div>
                                                                    </div>
                                                                    
                                                                  
								</div>
							</div>
						</div>			
					</div>
					
					

								<!-------   /////////////////////////// chart 2,1 ////////////////////// -->
								
					<div id="bottomrow" class="container chartrow">
						<div id="homecontent" class="container">
							<div id="homecontent-mid" class="row rounded">
								<div id="homebanner" class="rounded">
								<div class="sliderdiv">
                                                                    <div id="infobutton" class="infobutton hidden">
                                                                            <span class="infowrap"><i class="fa fa-info-circle"></i></span>
                                                                            <div id="" class="infodiv" >
                                                                                This chart shows the coverage of LARC-trained health workers, the coverage of 
                                                                                service provision at facilities with LARC-trained health workers, and the rate 
                                                                                of stock outs at facilities with LARC-trained health workers. Together, these 
                                                                                trend lines demonstrate whether the coverage of LARC services at facilities that 
                                                                                should be providing LARC is improving over time and provides some clues as to the 
                                                                                possible barriers (insufficient coverage of trained health workers, high stock outs, 
                                                                                or another service delivery challenge). LARC training includes LARC and Post Partum IUCD 
                                                                                in-service trainings.
                                                                            </div>
                                                                    </div>
                                                                    
                                                                    <div id="chart13_div" style="width: 600px; height: 400px;"></div>
                                                                    </div>
								</div>
							</div>
						</div>
								
						<!-------   /////////////////////////// chart 2,2 ////////////////////// -->		
                                                <div class="main-search"></div>

					</div>
                                </div>
				</div>
		
	</div>

		<div class="clear"></div>
		<div class="hrGrey"></div> 
		<div class="clear"></div>
		
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>

		<!-------   /////////////////////////// main gnr ////////////////////// -->

                
<!----------------------    Prepare the values for FP and LARC when GEO is selected -------------->
<?php
        
            
  ?>
                
<script type="text/javascript">
		
  google.load('visualization', '1.0', {'packages':['corechart', 'table', 'gauge', 'controls']});
  google.setOnLoadCallback(apiLoaded);
  function apiLoaded() {
	  document.getElementById("allCharts").style.marginLeft="130px";

	
	var currentLevel;
	currentLevel = <?php echo '\'' . $this->location_data[0]['name'] . '\''; ?>;
		 
    
        drawFPChart();
        drawLARCChart();
   
  }

  <!-------   /////////////////////////// script 1,1 ////////////////////// -->
  //TA:17:17: Coverage HW Trained chart
  function drawFPChart() {
      
      <?php
        $hwCoverage = $this->fp_overtime[0]; 
        $providingCoverage = $this->fp_overtime[1]; 
        $soCoverage = $this->fp_overtime[2]; 
      ?>
          
       //console.log(trainedHW);
       //return;
      
      var chartData = google.visualization.arrayToDataTable([

        [' ', '% of facilities with FP-trained HW',
            { role: 'tooltip', type: 'string', 'p': {'html': true} },
            '% of FP-trained facilities providing FP',
            { role: 'tooltip', type: 'string', 'p': {'html': true} },
            
            '% of FP-trained facilities stocked out of FP',
            { role: 'tooltip', type: 'string', 'p': {'html': true} }],
            
        <?php
                     foreach($hwCoverage as $i => $details) {
                         $month = $details['month'];
                         $hwCount = round($details['percent']*100, 1);
                         $hwToolTip = "<p style=\"padding:5px 7px;\"><b>$month</b><br/>Percent of facilities with FP-trained HW: " . $hwCount . "\%</p>";
                         $provCount = array_key_exists($i, $providingCoverage) ? round($providingCoverage[$i]['percent']*100, 1) : 0;
                         $provToolTip = "<p style=\"padding:5px 7px;\"><b>$month</b><br/>Percent of FP-trained facilities providing FP: " . $provCount . "\%</p>";
                         $soCount = array_key_exists($i, $soCoverage) ? round($soCoverage[$i]['percent']*100, 1) : 0;
                         $soCountToolTip = "<p style=\"padding:5px 7px;\"><b>$month</b><br/>Percent of FP-trained facilities stocked out of FP: " . $soCount . "\%</p>";
                         ?> 
                        [<?php echo "'$month', $hwCount,'$hwToolTip', $provCount,'$provToolTip', $soCount,'$soCountToolTip'"; ?>],
         <?php
                     }
        ?>                                        
      ]);

      <?php 
            if($this->freshvisit)
                echo  " var title_data = 'FP HR coverage, $this->start_date to $this->end_date' " ;
            else
                echo  " var title_data = 'FP HR coverage for $this->location_name, $this->start_date to $this->end_date' " ;
      ?>;
            
      
      var chartOptions = {
		      title: title_data,
		      titleTextStyle: { fontSize: 15 },
		      vAxis: {format: '#', minValue: 4},
		      legend: {fontSize: 14},
		      chartArea: { height: '70%', top: 55},
		      is3D:true,
                      tooltip : {isHtml : true },
		};

          
          var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
          
          //show info icon
          google.visualization.events.addListener(chart, 'ready', function(){
                    $("#chart_div").siblings('#infobutton').removeClass('hidden');
             });
	  chart.draw(chartData, chartOptions);
    }
    
    
    
    function drawLARCChart() {
      
      <?php
        $hwCoverage = $this->larc_overtime[0]; 
        $providingCoverage = $this->larc_overtime[1]; 
        $soCoverage = $this->larc_overtime[2]; 
      ?>
          
      var chartData = google.visualization.arrayToDataTable([
        [' ', 
         '% of facilities with LARC-trained HW',
         { role: 'tooltip', type: 'string', 'p': {'html': true} },
         '% of LARC-trained facilities providing LARC', 
         { role: 'tooltip', type: 'string', 'p': {'html': true} },
         '% of LARC-trained facilities stocked out of LARC',
         { role: 'tooltip', type: 'string', 'p': {'html': true} }],
        <?php
                     foreach($hwCoverage as $i => $details) {
                         $month = $details['month'];
                         $hwCount = round($details['percent']*100, 1);
                         $hwToolTip = "<p style=\"padding:5px 7px;\"><b>$month</b><br/>Percent of facilities with LARC-trained HW: " . $hwCount . "\%</p>";
                         $provCount = array_key_exists($i, $providingCoverage) ? round($providingCoverage[$i]['percent']*100, 1) : 0;
                         $provToolTip = "<p style=\"padding:5px 7px;\"><b>$month</b><br/>Percent of LARC-trained facilities providing LARC: " . $provCount . "\%</p>";
                         $soCount = array_key_exists($i, $soCoverage) ? round($soCoverage[$i]['percent']*100, 1) : 0;
                         $soCountToolTip = "<p style=\"padding:5px 7px;\"><b>$month</b><br/>Percent of LARC-trained facilities stocked out of LARC: " . $soCount . "\%</p>";
                         
                         ?> 
                        [<?php echo "'$month',$hwCount,'$hwToolTip', $provCount,'$provToolTip', $soCount,'$soCountToolTip'"; ?>],
         <?php
                     }
        ?>                                        
      ]);

        <?php 
            if($this->freshvisit)
                echo  " var title_data = 'LARC HR coverage, $this->start_date to $this->end_date' " ;
            else
                echo  " var title_data = 'LARC HR coverage for $this->location_name, $this->start_date to $this->end_date' " ;
      ?>;
      
      var chartOptions = {
		      title: title_data,
		      titleTextStyle: { fontSize: 15 },
		      vAxis: {format: '#', minValue: 4},
		      legend: {fontSize: 14},
		      chartArea: {height: '70%', top: 55},
		      is3D:true,
                      tooltip : {isHtml : true },
		};

          var chart = new google.visualization.LineChart(document.getElementById('chart13_div'));
          
          //show info icon
          google.visualization.events.addListener(chart, 'ready', function(){
                    $("#chart13_div").siblings('#infobutton').removeClass('hidden');
             });
             
	  chart.draw(chartData, chartOptions);
    }
    
  

</script>


<script>
  //devsite.github.Link.convertAnchors();
  //window.prettyPrint();
</script>	

  <div id="footer"><?php require_once('views/scripts/footer.phtml');?></div>



</body>

</html>